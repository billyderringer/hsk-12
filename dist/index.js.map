{"version":3,"sources":["../src/index.js"],"names":["LocalStrategy","require","Strategy","app","server","Server","use","json","limit","bodyLimit","initialize","Teacher","usernameField","passwordField","authenticate","serializeUser","deserializeUser","port","listen","console","log"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,gBAAgBC,QAAQ,gBAAR,EAA0BC,QAAhD;;AAEA,IAAIC,MAAM,wBAAV;AACAA,IAAIC,MAAJ,GAAa,eAAKC,MAAL,CAAYF,GAAZ,CAAb;AACA;;AAEA;AACA;AACA;;AAEA;AACAA,IAAIG,GAAJ,CAAQ,qBAAWC,IAAX,CAAgB;AACpBC,WAAO,iBAAOC;AADM,CAAhB,CAAR;;AAIA;AACAN,IAAIG,GAAJ,CAAQ,mBAASI,UAAT,EAAR;AACA,IAAIC,UAAUV,QAAQ,iBAAR,CAAd;AACA,mBAASK,GAAT,CAAa,IAAIN,aAAJ,CAAkB;AAC3BY,mBAAe,OADY;AAE3BC,mBAAe;AAFY,CAAlB,EAITF,QAAQG,YAAR,EAJS,CAAb;AAMA,mBAASC,aAAT,CAAuBJ,QAAQI,aAAR,EAAvB;AACA,mBAASC,eAAT,CAAyBL,QAAQK,eAAR,EAAzB;;AAEA;AACAb,IAAIG,GAAJ,CAAQ,UAAR;;AAEA,IAAIW,OAAO,iBAAOA,IAAlB;AACAd,IAAIC,MAAJ,CAAWc,MAAX,CAAkBD,IAAlB;AACAE,QAAQC,GAAR,CAAY,4BAA4BH,IAA5B,GAAmC,yBAA/C;;kBAEed,G","file":"index.js","sourcesContent":["import http from 'http'\r\nimport express from 'express'\r\nimport bodyParser from 'body-parser'\r\nimport config from './config/config'\r\nimport routes from './routes/routes'\r\nimport cors from 'cors'\r\nimport passport from 'passport'\r\n\r\nconst LocalStrategy = require('passport-local').Strategy\r\n\r\nlet app = express()\r\napp.server = http.Server(app)\r\n//app.disable('x-powered-by')\r\n\r\n// middleware\r\n//app.use(cors({credentials: true, origin: 'https://billyderringer.github.io'}))\r\n//app.options('https://billyderringer.github.io', cors())\r\n\r\n//parse application/json\r\napp.use(bodyParser.json({\r\n    limit: config.bodyLimit\r\n}))\r\n\r\n// passport config\r\napp.use(passport.initialize())\r\nlet Teacher = require('./model/teacher')\r\npassport.use(new LocalStrategy({\r\n    usernameField: 'email',\r\n    passwordField: 'password'\r\n},\r\n    Teacher.authenticate()\r\n))\r\npassport.serializeUser(Teacher.serializeUser())\r\npassport.deserializeUser(Teacher.deserializeUser())\r\n\r\n// api routes\r\napp.use('/api/v1/', routes)\r\n\r\nlet port = config.port\r\napp.server.listen(port)\r\nconsole.log('Server started on port ' + port + '. Press CTRL-C to exit.')\r\n\r\nexport default app"]}