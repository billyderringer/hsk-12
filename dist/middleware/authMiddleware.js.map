{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","username","password","authenticate","secret","generateAccessToken","req","res","next","token","sign","id","user","expiresIn","respond","status","json","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,KAAG,EAAH,GAAM,EAAN,GAAS,EAA3B,C,CAA+B;AAC/B,IAAMC,SAAS,8BAAf;AACA,IAAIC,WAAW,EAAf;AACA,IAAIC,WAAW,EAAf;;AAEA,IAAIC,eAAe,0BAAW,EAACC,QAAQJ,MAAT,EAAX,CAAnB;AACA;AACA,IAAIK,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1CF,QAAIG,KAAJ,GAAYH,IAAIG,KAAJ,IAAa,EAAzB;AACAH,QAAIG,KAAJ,GAAY,uBAAIC,IAAJ,CAAS;AACjBC,YAAIL,IAAIM,IAAJ,CAASD;AADI,KAAT,EAETX,MAFS,EAED;AACPa,mBAAWd;AADJ,KAFC,CAAZ;AAKAS;AACH,CARD;;AAUA,IAAIM,UAAU,SAAVA,OAAU,CAACR,GAAD,EAAMC,GAAN,EAAc;AACxBN,eAAWK,IAAIM,IAAJ,CAASX,QAApB;AACAC,eAAWI,IAAIG,KAAf;AACAF,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBJ,cAAMN,IAAIM,IAAJ,CAASX,QADE;AAEjBQ,eAAOH,IAAIG;AAFM,KAArB;AAIH,CAPD;;AASAQ,OAAOC,OAAP,GAAiB;AACbf,8BADa;AAEbE,4CAFa;AAGbS,oBAHa;AAIbb,sBAJa;AAKbC;AALa,CAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken'\r\nimport expressJwt from 'express-jwt'\r\n\r\nconst TOKENTIME = 60*60*24*30; //30 days\r\nconst SECRET = '1hav3s3cretsth4ty0uc4ntgues$'\r\nlet username = \"\"\r\nlet password = \"\"\r\n\r\nlet authenticate = expressJwt({secret: SECRET})\r\n// next parameter is a sign of middleware\r\nlet generateAccessToken = (req, res, next) => {\r\n    req.token = req.token || {}\r\n    req.token = jwt.sign({\r\n        id: req.user.id,\r\n    }, SECRET, {\r\n        expiresIn: TOKENTIME\r\n    });\r\n    next()\r\n}\r\n\r\nlet respond = (req, res) => {\r\n    username = req.user.username\r\n    password = req.token\r\n    res.status(200).json({\r\n        user: req.user.username,\r\n        token: req.token\r\n    })\r\n}\r\n\r\nmodule.exports = {\r\n    authenticate,\r\n    generateAccessToken,\r\n    respond,\r\n    username,\r\n    password\r\n}"]}