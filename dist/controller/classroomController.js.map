{"version":3,"sources":["classroomController.js"],"names":["Object","defineProperty","exports","value","_mongoose","require","_mongoose2","_interopRequireDefault","_express","_schoolModel","_schoolModel2","_classroomModel","_classroomModel2","_teacherModel","_teacherModel2","_studentModel","_studentModel2","obj","__esModule","default","_ref","config","db","api","Router","classroomCount","post","req","res","next","newClassroom","roomName","body","save","err","classroom","send","json","message","console","log","get","find","classes","findById","params","hubId","put","delete","remove","_id","id","deletedClass","teachers","students"],"mappings":"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","file":"classroomController.js","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\n\r\nvar _mongoose = require('mongoose');\r\n\r\nvar _mongoose2 = _interopRequireDefault(_mongoose);\r\n\r\nvar _express = require('express');\r\n\r\nvar _schoolModel = require('../model/schoolModel');\r\n\r\nvar _schoolModel2 = _interopRequireDefault(_schoolModel);\r\n\r\nvar _classroomModel = require('../model/classroomModel');\r\n\r\nvar _classroomModel2 = _interopRequireDefault(_classroomModel);\r\n\r\nvar _teacherModel = require('../model/teacherModel');\r\n\r\nvar _teacherModel2 = _interopRequireDefault(_teacherModel);\r\n\r\nvar _studentModel = require('../model/studentModel');\r\n\r\nvar _studentModel2 = _interopRequireDefault(_studentModel);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = function (_ref) {\r\n    var config = _ref.config,\r\n        db = _ref.db;\r\n\r\n    var api = (0, _express.Router)();\r\n    var classroomCount = 0;\r\n\r\n    // '/hub/create' - Create Homeroom\r\n    api.post('/create', function (req, res, next) {\r\n        var newClassroom = new _classroomModel2.default();\r\n        newClassroom.roomName = req.body.roomName;\r\n        newClassroom.save(function (err, classroom) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            classroom.save(function (err) {\r\n                if (err) {\r\n                    res.send(err);\r\n                }\r\n                res.json({ message: newClassroom.roomName + ' has been created successfully' });\r\n                classroomCount++;\r\n                console.log(classroomCount);\r\n            });\r\n        });\r\n    });\r\n\r\n    // '/hub' - Read all classrooms\r\n    api.get('/', function (req, res, next) {\r\n        _classroomModel2.default.find({}, function (err, classes) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            res.json(classes);\r\n        });\r\n    });\r\n\r\n    // '/hub/:hubId' - Read classroom by id\r\n    api.get('/:hubId', function (req, res) {\r\n        //.findById method\r\n        _classroomModel2.default.findById(req.params.hubId, function (err, classroom) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            res.json(classroom);\r\n        });\r\n    });\r\n\r\n    // '/hub/update/:hubId' - Update classroom\r\n    api.put('/update/:hubId', function (req, res) {\r\n        _classroomModel2.default.findById(req.params.hubId, function (err, classroom) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            classroom.roomName = req.body.roomName;\r\n            classroom.save(function (err) {\r\n                if (err) {\r\n                    res.send(err);\r\n                }\r\n                res.json({ message: classroom.roomName + ' info updated' });\r\n            });\r\n        });\r\n    });\r\n\r\n    // '/hub/remove/:id' - Delete classroom\r\n    api.delete('/remove/:id', function (req, res) {\r\n        _classroomModel2.default.remove({ _id: req.params.id }, function (err, deletedClass) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            var id = deletedClass.teachers;\r\n            _teacherModel2.default.remove(id, function (err, teachers) {\r\n                if (err) {\r\n                    res.send(err);\r\n                }\r\n            });\r\n            id = deletedClass.students;\r\n            _studentModel2.default.remove(id, function (err, students) {\r\n                if (err) {\r\n                    res.send(err);\r\n                }\r\n                res.json({ message: \"Homeroom successfully removed\" });\r\n            });\r\n        });\r\n    });\r\n\r\n    return api;\r\n};\r\n//# sourceMappingURL=homeroom.js.map"]}