{"version":3,"sources":["studentController.js"],"names":["Object","defineProperty","exports","value","_mongoose","require","_mongoose2","_interopRequireDefault","_express","_schoolModel","_schoolModel2","_classroomModel","_classroomModel2","_teacherModel","_teacherModel2","_studentModel","_studentModel2","obj","__esModule","default","_ref","config","db","api","Router","post","req","res","findById","params","id","err","school","send","newStudent","firstName","body","lastName","gradeLevel","gradingScale","hub","_id","save","student","students","push","json","message"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;;AAIA,IAAIC,YAAYC,QAAQ,UAAR,CAAhB;;AAEA,IAAIC,aAAaC,uBAAuBH,SAAvB,CAAjB;;AAEA,IAAII,WAAWH,QAAQ,SAAR,CAAf;;AAEA,IAAII,eAAeJ,QAAQ,sBAAR,CAAnB;;AAEA,IAAIK,gBAAgBH,uBAAuBE,YAAvB,CAApB;;AAEA,IAAIE,kBAAkBN,QAAQ,yBAAR,CAAtB;;AAEA,IAAIO,mBAAmBL,uBAAuBI,eAAvB,CAAvB;;AAEA,IAAIE,gBAAgBR,QAAQ,uBAAR,CAApB;;AAEA,IAAIS,iBAAiBP,uBAAuBM,aAAvB,CAArB;;AAEA,IAAIE,gBAAgBV,QAAQ,uBAAR,CAApB;;AAEA,IAAIW,iBAAiBT,uBAAuBQ,aAAvB,CAArB;;AAEA,SAASR,sBAAT,CAAgCU,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/Ff,QAAQiB,OAAR,GAAkB,UAAUC,IAAV,EAAgB;AAC9B,QAAIC,SAASD,KAAKC,MAAlB;AAAA,QACIC,KAAKF,KAAKE,EADd;;AAGA,QAAIC,MAAM,CAAC,GAAGf,SAASgB,MAAb,GAAV;;AAEA;AACAD,QAAIE,IAAJ,CAAS,UAAT,EAAqB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACrCjB,sBAAcS,OAAd,CAAsBS,QAAtB,CAA+BF,IAAIG,MAAJ,CAAWC,EAA1C,EAA8C,UAAUC,GAAV,EAAeC,MAAf,EAAuB;AACjE,gBAAID,GAAJ,EAAS;AACLJ,oBAAIM,IAAJ,CAASF,GAAT;AACH;AACD,gBAAIG,aAAa,IAAIlB,eAAeG,OAAnB,EAAjB;AACAe,uBAAWC,SAAX,GAAuBT,IAAIU,IAAJ,CAASD,SAAhC;AACAD,uBAAWG,QAAX,GAAsBX,IAAIU,IAAJ,CAASC,QAA/B;AACAH,uBAAWI,UAAX,GAAwBZ,IAAIU,IAAJ,CAASE,UAAjC;AACAJ,uBAAWK,YAAX,GAA0Bb,IAAIU,IAAJ,CAASG,YAAnC;AACAL,uBAAWM,GAAX,GAAiBA,IAAIC,GAArB;AACAP,uBAAWQ,IAAX,CAAgB,UAAUX,GAAV,EAAeY,OAAf,EAAwB;AACpC,oBAAIZ,GAAJ,EAAS;AACLJ,wBAAIM,IAAJ,CAASF,GAAT;AACH;AACDS,oBAAII,QAAJ,CAAaC,IAAb,CAAkBX,UAAlB;AACAM,oBAAIE,IAAJ,CAAS,UAAUX,GAAV,EAAe;AACpB,wBAAIA,GAAJ,EAAS;AACLJ,4BAAIM,IAAJ,CAASF,GAAT;AACH;AACJ,iBAJD;AAKAY,wBAAQD,IAAR,CAAa,UAAUX,GAAV,EAAe;AACxB,wBAAIA,GAAJ,EAAS;AACLJ,4BAAIM,IAAJ,CAASF,GAAT;AACH;AACDJ,wBAAImB,IAAJ,CAAS,EAAEC,SAAS,mCAAX,EAAT;AACH,iBALD;AAMH,aAhBD;AAiBH,SA3BD;AA4BH,KA7BD;;AA+BA,WAAOxB,GAAP;AACH,CAvCD;AAwCA","file":"studentController.js","sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\n\r\nvar _mongoose = require('mongoose');\r\n\r\nvar _mongoose2 = _interopRequireDefault(_mongoose);\r\n\r\nvar _express = require('express');\r\n\r\nvar _schoolModel = require('../model/schoolModel');\r\n\r\nvar _schoolModel2 = _interopRequireDefault(_schoolModel);\r\n\r\nvar _classroomModel = require('../model/classroomModel');\r\n\r\nvar _classroomModel2 = _interopRequireDefault(_classroomModel);\r\n\r\nvar _teacherModel = require('../model/teacherModel');\r\n\r\nvar _teacherModel2 = _interopRequireDefault(_teacherModel);\r\n\r\nvar _studentModel = require('../model/studentModel');\r\n\r\nvar _studentModel2 = _interopRequireDefault(_studentModel);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nexports.default = function (_ref) {\r\n    var config = _ref.config,\r\n        db = _ref.db;\r\n\r\n    var api = (0, _express.Router)();\r\n\r\n    // '/classroom/students/add/:id' - Create new students\r\n    api.post('/add/:id', function (req, res) {\r\n        _schoolModel2.default.findById(req.params.id, function (err, school) {\r\n            if (err) {\r\n                res.send(err);\r\n            }\r\n            var newStudent = new _studentModel2.default();\r\n            newStudent.firstName = req.body.firstName;\r\n            newStudent.lastName = req.body.lastName;\r\n            newStudent.gradeLevel = req.body.gradeLevel;\r\n            newStudent.gradingScale = req.body.gradingScale;\r\n            newStudent.hub = hub._id;\r\n            newStudent.save(function (err, student) {\r\n                if (err) {\r\n                    res.send(err);\r\n                }\r\n                hub.students.push(newStudent);\r\n                hub.save(function (err) {\r\n                    if (err) {\r\n                        res.send(err);\r\n                    }\r\n                });\r\n                student.save(function (err) {\r\n                    if (err) {\r\n                        res.send(err);\r\n                    }\r\n                    res.json({ message: 'Student successfully saved to hub' });\r\n                });\r\n            });\r\n        });\r\n    });\r\n\r\n    return api;\r\n};\r\n//# sourceMappingURL=student.js.map"]}