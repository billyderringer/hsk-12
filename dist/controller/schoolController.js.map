{"version":3,"sources":["../../src/controller/schoolController.js"],"names":["config","db","api","post","req","res","newSchool","name","body","principalName","save","err","send","json","message","get","find","schools","findById","params","id","school","put","updatedSchool","delete","remove","_id","deletedSchool"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;;;kBAEe,gBAAkB;AAAA,QAAhBA,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,EAAQ,QAARA,EAAQ;;AAC7B,QAAIC,MAAM,sBAAV;;AAEA;AACAA,QAAIC,IAAJ,CAAS,MAAT,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3B,YAAIC,YAAY,2BAAhB;AACAA,kBAAUC,IAAV,GAAiBH,IAAII,IAAJ,CAASD,IAA1B;AACAD,kBAAUG,aAAV,GAA0BL,IAAII,IAAJ,CAASC,aAAnC;AACAH,kBAAUI,IAAV,CAAe,eAAO;AAClB,gBAAGC,GAAH,EAAO;AACHN,oBAAIO,IAAJ,CAASD,GAAT;AACH;AACDN,gBAAIQ,IAAJ,CAAS,EAACC,SAASR,UAAUC,IAAV,GAAiB,gCAA3B,EAAT;AACH,SALD;AAMH,KAVD;;AAYA;AACAL,QAAIa,GAAJ,CAAQ,GAAR,EAAa,UAACX,GAAD,EAAMC,GAAN,EAAc;AACvB,8BAAOW,IAAP,CAAY,EAAZ,EAAe,UAACL,GAAD,EAAMM,OAAN,EAAiB;AAC5B,gBAAGN,GAAH,EAAO;AACHN,oBAAIO,IAAJ,CAASD,GAAT;AACH;AACDN,gBAAIQ,IAAJ,CAASI,OAAT;AACH,SALD;AAMH,KAPD;;AASA;AACAf,QAAIa,GAAJ,CAAQ,MAAR,EAAgB,UAACX,GAAD,EAAMC,GAAN,EAAc;AAC1B;AACA,8BAAOa,QAAP,CAAgBd,IAAIe,MAAJ,CAAWC,EAA3B,EAA+B,UAACT,GAAD,EAAMU,MAAN,EAAiB;AAC5C,gBAAGV,GAAH,EAAO;AACHN,oBAAIO,IAAJ,CAASD,GAAT;AACH;AACDN,gBAAIQ,IAAJ,CAASQ,MAAT;AACH,SALD;AAMH,KARD;;AAUA;AACAnB,QAAIoB,GAAJ,CAAQ,MAAR,EAAgB,UAAClB,GAAD,EAAMC,GAAN,EAAc;AAC1B,8BAAOa,QAAP,CAAgBd,IAAIe,MAAJ,CAAWC,EAA3B,EAA+B,UAACT,GAAD,EAAMY,aAAN,EAAwB;AACnD,gBAAGZ,GAAH,EAAO;AACHN,oBAAIO,IAAJ,CAASD,GAAT;AACH;AACDY,0BAAchB,IAAd,GAAqBH,IAAII,IAAJ,CAASD,IAA9B;AACAgB,0BAAcd,aAAd,GAA8BL,IAAII,IAAJ,CAASC,aAAvC;AACAc,0BAAcb,IAAd,CAAmB,eAAO;AACtB,oBAAGC,GAAH,EAAO;AACHN,wBAAIO,IAAJ,CAASD,GAAT;AACH;AACDN,oBAAIQ,IAAJ,CAAS,EAACC,SAASS,cAAchB,IAAd,GAAqB,eAA/B,EAAT;AACH,aALD;AAMH,SAZD;AAaH,KAdD;;AAgBA;AACAL,QAAIsB,MAAJ,CAAW,MAAX,EAAmB,UAACpB,GAAD,EAAMC,GAAN,EAAc;AAC7B,8BAAOoB,MAAP,CAAc,EAACC,KAAKtB,IAAIe,MAAJ,CAAWC,EAAjB,EAAd,EAAoC,UAACT,GAAD,EAAMgB,aAAN,EAAwB;AACxD,gBAAGhB,GAAH,EAAO;AACHN,oBAAIO,IAAJ,CAASD,GAAT;AACH;AACDN,gBAAIQ,IAAJ,CAAS,EAACC,SAAS,6BAAV,EAAT;AACH,SALD;AAMH,KAPD;;AASJ,WAAOZ,GAAP;AACC,C","file":"schoolController.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport {Router} from 'express';\r\nimport School from '../model/schoolModel';\r\n\r\nexport default ({config, db}) => {\r\n    let api = Router();\r\n\r\n    // '/v1/school/add' - Create\r\n    api.post('/add', (req, res) => {\r\n        let newSchool = new School();\r\n        newSchool.name = req.body.name;\r\n        newSchool.principalName = req.body.principalName;\r\n        newSchool.save(err => {\r\n            if(err){\r\n                res.send(err);\r\n            }\r\n            res.json({message: newSchool.name + ' has been created successfully'})\r\n        });\r\n    });\r\n\r\n    // '/v1/school' - Read\r\n    api.get('/', (req, res) => {\r\n        School.find({},(err, schools) =>{\r\n            if(err){\r\n                res.send(err);\r\n            }\r\n            res.json(schools);\r\n        });\r\n    });\r\n\r\n    // '/v1/school/:id' - Read 1\r\n    api.get('/:id', (req, res) => {\r\n        //.findById method\r\n        School.findById(req.params.id, (err, school) => {\r\n            if(err){\r\n                res.send(err);\r\n            }\r\n            res.json(school);\r\n        });\r\n    });\r\n\r\n    // '/v1/school/:id' - Update\r\n    api.put('/:id', (req, res) => {\r\n        School.findById(req.params.id, (err, updatedSchool) => {\r\n            if(err){\r\n                res.send(err);\r\n            }\r\n            updatedSchool.name = req.body.name;\r\n            updatedSchool.principalName = req.body.principalName;\r\n            updatedSchool.save(err => {\r\n                if(err){\r\n                    res.send(err);\r\n                }\r\n                res.json({message: updatedSchool.name + ' info updated'});\r\n            });\r\n        });\r\n    });\r\n\r\n    // '/v1/school/:id' - Delete\r\n    api.delete('/:id', (req, res) => {\r\n        School.remove({_id: req.params.id}, (err, deletedSchool) => {\r\n            if(err){\r\n                res.send(err);\r\n            }\r\n            res.json({message: \"School successfully removed\"});\r\n        });\r\n    });\r\n\r\nreturn api;\r\n}"]}